# Cursor AI Rules for This Project

## üî¥ CRITICAL: Secret Management

**NEVER include in any code or config files:**
- API keys (Stripe: sk_*, pk_*, Resend: re_*, etc.)
- Database URLs with credentials (postgresql://user:pass@host)
- OAuth secrets or client secrets
- Session secrets, JWT tokens, or NextAuth secrets
- Any values from ENV_VARIABLES_FOR_VERCEL.txt

**ALWAYS:**
- Reference `process.env.VARIABLE_NAME` without fallback values
- Document "Set in .env.local" for local development
- Use environment variables for ALL sensitive configuration

## Test Configuration Pattern

```typescript
// ‚úÖ CORRECT
env: {
  DATABASE_URL: process.env.DATABASE_URL,
  STRIPE_SECRET_KEY: process.env.STRIPE_SECRET_KEY,
}

// ‚ùå WRONG - Never use fallback values with real secrets
env: {
  DATABASE_URL: process.env.DATABASE_URL || "postgresql://...",
}
```

## Pre-Commit Checklist

Before any git commit:
1. ‚úÖ No hardcoded API keys or secrets
2. ‚úÖ No database credentials in files
3. ‚úÖ Environment variables used correctly
4. ‚úÖ All tests passing
5. ‚úÖ No console.logs with sensitive data

## Code Review Focus

When reviewing code:
- üîç Check for secret patterns: `sk_`, `pk_`, `whsec_`, `re_`, `postgresql://`
- üîç Verify `.env` files are gitignored
- üîç Ensure test configs use env vars only
- üîç Check for TODO comments about secrets

## Development Workflow

1. **Setup:** Copy ENV_VARIABLES_FOR_VERCEL.txt ‚Üí .env.local
2. **Code:** Use process.env.* everywhere
3. **Test:** Ensure tests pass with env vars set
4. **Commit:** Pre-commit hook scans for secrets
5. **Push:** GitHub secret scanning validates

---

**Remember:** One exposed secret = security incident + key rotation + history rewrite
**Prevention:** Always use environment variables, never hardcode secrets

