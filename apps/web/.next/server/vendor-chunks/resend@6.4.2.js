"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/resend@6.4.2";
exports.ids = ["vendor-chunks/resend@6.4.2"];
exports.modules = {

/***/ "(rsc)/../../node_modules/.pnpm/resend@6.4.2/node_modules/resend/dist/index.mjs":
/*!********************************************************************************!*\
  !*** ../../node_modules/.pnpm/resend@6.4.2/node_modules/resend/dist/index.mjs ***!
  \********************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Resend: () => (/* binding */ Resend)\n/* harmony export */ });\n/* harmony import */ var svix__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! svix */ \"(rsc)/../../node_modules/.pnpm/svix@1.76.1/node_modules/svix/dist/index.js\");\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\n\n// package.json\nvar version = \"6.4.2\";\n\n// src/common/utils/build-pagination-query.ts\nfunction buildPaginationQuery(options) {\n  const searchParams = new URLSearchParams();\n  if (options.limit !== void 0) {\n    searchParams.set(\"limit\", options.limit.toString());\n  }\n  if (\"after\" in options && options.after !== void 0) {\n    searchParams.set(\"after\", options.after);\n  }\n  if (\"before\" in options && options.before !== void 0) {\n    searchParams.set(\"before\", options.before);\n  }\n  return searchParams.toString();\n}\n\n// src/api-keys/api-keys.ts\nvar ApiKeys = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      \"/api-keys\",\n      payload,\n      options\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/api-keys?${queryString}` : \"/api-keys\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/api-keys/${id}`\n    );\n    return data;\n  }\n};\n\n// src/common/utils/parse-email-to-api-options.ts\nfunction parseAttachments(attachments) {\n  return attachments == null ? void 0 : attachments.map((attachment) => ({\n    content: attachment.content,\n    filename: attachment.filename,\n    path: attachment.path,\n    content_type: attachment.contentType,\n    content_id: attachment.contentId\n  }));\n}\nfunction parseEmailToApiOptions(email) {\n  return {\n    attachments: parseAttachments(email.attachments),\n    bcc: email.bcc,\n    cc: email.cc,\n    from: email.from,\n    headers: email.headers,\n    html: email.html,\n    reply_to: email.replyTo,\n    scheduled_at: email.scheduledAt,\n    subject: email.subject,\n    tags: email.tags,\n    text: email.text,\n    to: email.to,\n    template: email.template ? {\n      id: email.template.id,\n      variables: email.template.variables\n    } : void 0,\n    topic_id: email.topicId\n  };\n}\n\n// src/render.ts\nasync function render(node) {\n  let render2;\n  try {\n    ({ render: render2 } = await __webpack_require__.e(/*! import() */ \"_b46c\").then(__webpack_require__.t.bind(__webpack_require__, /*! @react-email/render */ \"?b46c\", 19)));\n  } catch (e) {\n    throw new Error(\n      \"Failed to render React component. Make sure to install `@react-email/render` or `@react-email/components`.\"\n    );\n  }\n  return render2(node);\n}\n\n// src/batch/batch.ts\nvar Batch = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async send(payload, options) {\n    return this.create(payload, options);\n  }\n  async create(payload, options) {\n    var _a;\n    const emails = [];\n    for (const email of payload) {\n      if (email.react) {\n        email.html = await render(email.react);\n        email.react = void 0;\n      }\n      emails.push(parseEmailToApiOptions(email));\n    }\n    const data = await this.resend.post(\n      \"/emails/batch\",\n      emails,\n      __spreadProps(__spreadValues({}, options), {\n        headers: __spreadValues({\n          \"x-batch-validation\": (_a = options == null ? void 0 : options.batchValidation) != null ? _a : \"strict\"\n        }, options == null ? void 0 : options.headers)\n      })\n    );\n    return data;\n  }\n};\n\n// src/broadcasts/broadcasts.ts\nvar Broadcasts = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    if (payload.react) {\n      payload.html = await render(payload.react);\n    }\n    const data = await this.resend.post(\n      \"/broadcasts\",\n      {\n        name: payload.name,\n        segment_id: payload.segmentId,\n        audience_id: payload.audienceId,\n        preview_text: payload.previewText,\n        from: payload.from,\n        html: payload.html,\n        reply_to: payload.replyTo,\n        subject: payload.subject,\n        text: payload.text,\n        topic_id: payload.topicId\n      },\n      options\n    );\n    return data;\n  }\n  async send(id, payload) {\n    const data = await this.resend.post(\n      `/broadcasts/${id}/send`,\n      { scheduled_at: payload == null ? void 0 : payload.scheduledAt }\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/broadcasts?${queryString}` : \"/broadcasts\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/broadcasts/${id}`\n    );\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/broadcasts/${id}`\n    );\n    return data;\n  }\n  async update(id, payload) {\n    if (payload.react) {\n      payload.html = await render(payload.react);\n    }\n    const data = await this.resend.patch(\n      `/broadcasts/${id}`,\n      {\n        name: payload.name,\n        segment_id: payload.segmentId,\n        audience_id: payload.audienceId,\n        from: payload.from,\n        html: payload.html,\n        text: payload.text,\n        subject: payload.subject,\n        reply_to: payload.replyTo,\n        preview_text: payload.previewText,\n        topic_id: payload.topicId\n      }\n    );\n    return data;\n  }\n};\n\n// src/common/utils/parse-contact-properties-to-api-options.ts\nfunction parseContactPropertyFromApi(contactProperty) {\n  return {\n    id: contactProperty.id,\n    key: contactProperty.key,\n    createdAt: contactProperty.created_at,\n    type: contactProperty.type,\n    fallbackValue: contactProperty.fallback_value\n  };\n}\nfunction parseContactPropertyToApiOptions(contactProperty) {\n  if (\"key\" in contactProperty) {\n    return {\n      key: contactProperty.key,\n      type: contactProperty.type,\n      fallback_value: contactProperty.fallbackValue\n    };\n  }\n  return {\n    fallback_value: contactProperty.fallbackValue\n  };\n}\n\n// src/contact-properties/contact-properties.ts\nvar ContactProperties = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(options) {\n    const apiOptions = parseContactPropertyToApiOptions(options);\n    const data = await this.resend.post(\n      \"/contact-properties\",\n      apiOptions\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/contact-properties?${queryString}` : \"/contact-properties\";\n    const response = await this.resend.get(url);\n    if (response.data) {\n      return {\n        data: __spreadProps(__spreadValues({}, response.data), {\n          data: response.data.data.map(\n            (apiContactProperty) => parseContactPropertyFromApi(apiContactProperty)\n          )\n        }),\n        headers: response.headers,\n        error: null\n      };\n    }\n    return response;\n  }\n  async get(id) {\n    if (!id) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const response = await this.resend.get(\n      `/contact-properties/${id}`\n    );\n    if (response.data) {\n      return {\n        data: __spreadValues({\n          object: \"contact_property\"\n        }, parseContactPropertyFromApi(response.data)),\n        headers: response.headers,\n        error: null\n      };\n    }\n    return response;\n  }\n  async update(payload) {\n    if (!payload.id) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const apiOptions = parseContactPropertyToApiOptions(payload);\n    const data = await this.resend.patch(\n      `/contact-properties/${payload.id}`,\n      apiOptions\n    );\n    return data;\n  }\n  async remove(id) {\n    if (!id) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const data = await this.resend.delete(\n      `/contact-properties/${id}`\n    );\n    return data;\n  }\n};\n\n// src/contacts/segments/contact-segments.ts\nvar ContactSegments = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async list(options) {\n    if (!options.contactId && !options.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const identifier = options.email ? options.email : options.contactId;\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/contacts/${identifier}/segments?${queryString}` : `/contacts/${identifier}/segments`;\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async add(options) {\n    if (!options.contactId && !options.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const identifier = options.email ? options.email : options.contactId;\n    return this.resend.post(\n      `/contacts/${identifier}/segments/${options.segmentId}`\n    );\n  }\n  async remove(options) {\n    if (!options.contactId && !options.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const identifier = options.email ? options.email : options.contactId;\n    return this.resend.delete(\n      `/contacts/${identifier}/segments/${options.segmentId}`\n    );\n  }\n};\n\n// src/contacts/topics/contact-topics.ts\nvar ContactTopics = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async update(payload) {\n    if (!payload.id && !payload.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const identifier = payload.email ? payload.email : payload.id;\n    return this.resend.patch(\n      `/contacts/${identifier}/topics`,\n      payload.topics\n    );\n  }\n  async list(options) {\n    if (!options.id && !options.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const identifier = options.email ? options.email : options.id;\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/contacts/${identifier}/topics?${queryString}` : `/contacts/${identifier}/topics`;\n    return this.resend.get(url);\n  }\n};\n\n// src/contacts/contacts.ts\nvar Contacts = class {\n  constructor(resend) {\n    this.resend = resend;\n    this.topics = new ContactTopics(this.resend);\n    this.segments = new ContactSegments(this.resend);\n  }\n  async create(payload, options = {}) {\n    if (!payload.audienceId) {\n      const data2 = await this.resend.post(\n        \"/contacts\",\n        {\n          unsubscribed: payload.unsubscribed,\n          email: payload.email,\n          first_name: payload.firstName,\n          last_name: payload.lastName,\n          properties: payload.properties\n        },\n        options\n      );\n      return data2;\n    }\n    const data = await this.resend.post(\n      `/audiences/${payload.audienceId}/contacts`,\n      {\n        unsubscribed: payload.unsubscribed,\n        email: payload.email,\n        first_name: payload.firstName,\n        last_name: payload.lastName,\n        properties: payload.properties\n      },\n      options\n    );\n    return data;\n  }\n  async list(options = {}) {\n    var _a;\n    const segmentId = (_a = options.segmentId) != null ? _a : options.audienceId;\n    if (!segmentId) {\n      const queryString2 = buildPaginationQuery(options);\n      const url2 = queryString2 ? `/contacts?${queryString2}` : \"/contacts\";\n      const data2 = await this.resend.get(url2);\n      return data2;\n    }\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/segments/${segmentId}/contacts?${queryString}` : `/segments/${segmentId}/contacts`;\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async get(options) {\n    if (typeof options === \"string\") {\n      return this.resend.get(`/contacts/${options}`);\n    }\n    if (!options.id && !options.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    if (!options.audienceId) {\n      return this.resend.get(\n        `/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`\n      );\n    }\n    return this.resend.get(\n      `/audiences/${options.audienceId}/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`\n    );\n  }\n  async update(options) {\n    if (!options.id && !options.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    if (!options.audienceId) {\n      const data2 = await this.resend.patch(\n        `/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`,\n        {\n          unsubscribed: options.unsubscribed,\n          first_name: options.firstName,\n          last_name: options.lastName,\n          properties: options.properties\n        }\n      );\n      return data2;\n    }\n    const data = await this.resend.patch(\n      `/audiences/${options.audienceId}/contacts/${(options == null ? void 0 : options.email) ? options == null ? void 0 : options.email : options == null ? void 0 : options.id}`,\n      {\n        unsubscribed: options.unsubscribed,\n        first_name: options.firstName,\n        last_name: options.lastName,\n        properties: options.properties\n      }\n    );\n    return data;\n  }\n  async remove(payload) {\n    if (typeof payload === \"string\") {\n      return this.resend.delete(\n        `/contacts/${payload}`\n      );\n    }\n    if (!payload.id && !payload.email) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` or `email` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    if (!payload.audienceId) {\n      return this.resend.delete(\n        `/contacts/${(payload == null ? void 0 : payload.email) ? payload == null ? void 0 : payload.email : payload == null ? void 0 : payload.id}`\n      );\n    }\n    return this.resend.delete(\n      `/audiences/${payload.audienceId}/contacts/${(payload == null ? void 0 : payload.email) ? payload == null ? void 0 : payload.email : payload == null ? void 0 : payload.id}`\n    );\n  }\n};\n\n// src/common/utils/parse-domain-to-api-options.ts\nfunction parseDomainToApiOptions(domain) {\n  return {\n    name: domain.name,\n    region: domain.region,\n    custom_return_path: domain.customReturnPath\n  };\n}\n\n// src/domains/domains.ts\nvar Domains = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      \"/domains\",\n      parseDomainToApiOptions(payload),\n      options\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/domains?${queryString}` : \"/domains\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/domains/${id}`\n    );\n    return data;\n  }\n  async update(payload) {\n    const data = await this.resend.patch(\n      `/domains/${payload.id}`,\n      {\n        click_tracking: payload.clickTracking,\n        open_tracking: payload.openTracking,\n        tls: payload.tls\n      }\n    );\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/domains/${id}`\n    );\n    return data;\n  }\n  async verify(id) {\n    const data = await this.resend.post(\n      `/domains/${id}/verify`\n    );\n    return data;\n  }\n};\n\n// src/emails/attachments/attachments.ts\nvar Attachments = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async get(options) {\n    const { emailId, id } = options;\n    const data = await this.resend.get(\n      `/emails/${emailId}/attachments/${id}`\n    );\n    return data;\n  }\n  async list(options) {\n    const { emailId } = options;\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/emails/${emailId}/attachments?${queryString}` : `/emails/${emailId}/attachments`;\n    const data = await this.resend.get(url);\n    return data;\n  }\n};\n\n// src/emails/receiving/attachments/attachments.ts\nvar Attachments2 = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async get(options) {\n    const { emailId, id } = options;\n    const data = await this.resend.get(\n      `/emails/receiving/${emailId}/attachments/${id}`\n    );\n    return data;\n  }\n  async list(options) {\n    const { emailId } = options;\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/emails/receiving/${emailId}/attachments?${queryString}` : `/emails/receiving/${emailId}/attachments`;\n    const data = await this.resend.get(url);\n    return data;\n  }\n};\n\n// src/emails/receiving/receiving.ts\nvar Receiving = class {\n  constructor(resend) {\n    this.resend = resend;\n    this.attachments = new Attachments2(resend);\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/emails/receiving/${id}`\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/emails/receiving?${queryString}` : \"/emails/receiving\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n};\n\n// src/emails/emails.ts\nvar Emails = class {\n  constructor(resend) {\n    this.resend = resend;\n    this.attachments = new Attachments(resend);\n    this.receiving = new Receiving(resend);\n  }\n  async send(payload, options = {}) {\n    return this.create(payload, options);\n  }\n  async create(payload, options = {}) {\n    if (payload.react) {\n      payload.html = await render(payload.react);\n    }\n    const data = await this.resend.post(\n      \"/emails\",\n      parseEmailToApiOptions(payload),\n      options\n    );\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/emails/${id}`\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/emails?${queryString}` : \"/emails\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async update(payload) {\n    const data = await this.resend.patch(\n      `/emails/${payload.id}`,\n      {\n        scheduled_at: payload.scheduledAt\n      }\n    );\n    return data;\n  }\n  async cancel(id) {\n    const data = await this.resend.post(\n      `/emails/${id}/cancel`\n    );\n    return data;\n  }\n};\n\n// src/segments/segments.ts\nvar Segments = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      \"/segments\",\n      payload,\n      options\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/segments?${queryString}` : \"/segments\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/segments/${id}`\n    );\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/segments/${id}`\n    );\n    return data;\n  }\n};\n\n// src/common/utils/get-pagination-query-properties.ts\nfunction getPaginationQueryProperties(options = {}) {\n  const query = new URLSearchParams();\n  if (options.before) query.set(\"before\", options.before);\n  if (options.after) query.set(\"after\", options.after);\n  if (options.limit) query.set(\"limit\", options.limit.toString());\n  return query.size > 0 ? `?${query.toString()}` : \"\";\n}\n\n// src/common/utils/parse-template-to-api-options.ts\nfunction parseVariables(variables) {\n  return variables == null ? void 0 : variables.map((variable) => ({\n    key: variable.key,\n    type: variable.type,\n    fallback_value: variable.fallbackValue\n  }));\n}\nfunction parseTemplateToApiOptions(template) {\n  return {\n    name: \"name\" in template ? template.name : void 0,\n    subject: template.subject,\n    html: template.html,\n    text: template.text,\n    alias: template.alias,\n    from: template.from,\n    reply_to: template.replyTo,\n    variables: parseVariables(template.variables)\n  };\n}\n\n// src/templates/chainable-template-result.ts\nvar ChainableTemplateResult = class {\n  constructor(promise, publishFn) {\n    this.promise = promise;\n    this.publishFn = publishFn;\n  }\n  // If user calls `then` or only awaits for the result of create() or duplicate(), the behavior should be\n  // exactly as if they called create() or duplicate() directly. This will act as a normal promise\n  // biome-ignore lint/suspicious/noThenProperty: This class intentionally implements PromiseLike\n  then(onfulfilled, onrejected) {\n    return this.promise.then(onfulfilled, onrejected);\n  }\n  async publish() {\n    const { data, error } = await this.promise;\n    if (error) {\n      return {\n        data: null,\n        headers: null,\n        error\n      };\n    }\n    return this.publishFn(data.id);\n  }\n};\n\n// src/templates/templates.ts\nvar Templates = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  create(payload) {\n    const createPromise = this.performCreate(payload);\n    return new ChainableTemplateResult(createPromise, this.publish.bind(this));\n  }\n  // This creation process is being done separately from the public create so that\n  // the user can chain the publish operation after the create operation. Otherwise, due\n  // to the async nature of the renderAsync, the return type would be\n  // Promise<ChainableTemplateResult<CreateTemplateResponse>> which wouldn't be chainable.\n  async performCreate(payload) {\n    if (payload.react) {\n      if (!this.renderAsync) {\n        try {\n          const { renderAsync } = await __webpack_require__.e(/*! import() */ \"_b46c\").then(__webpack_require__.t.bind(__webpack_require__, /*! @react-email/render */ \"?b46c\", 19));\n          this.renderAsync = renderAsync;\n        } catch (e) {\n          throw new Error(\n            \"Failed to render React component. Make sure to install `@react-email/render`\"\n          );\n        }\n      }\n      payload.html = await this.renderAsync(\n        payload.react\n      );\n    }\n    return this.resend.post(\n      \"/templates\",\n      parseTemplateToApiOptions(payload)\n    );\n  }\n  async remove(identifier) {\n    const data = await this.resend.delete(\n      `/templates/${identifier}`\n    );\n    return data;\n  }\n  async get(identifier) {\n    const data = await this.resend.get(\n      `/templates/${identifier}`\n    );\n    return data;\n  }\n  async list(options = {}) {\n    return this.resend.get(\n      `/templates${getPaginationQueryProperties(options)}`\n    );\n  }\n  duplicate(identifier) {\n    const promiseDuplicate = this.resend.post(\n      `/templates/${identifier}/duplicate`\n    );\n    return new ChainableTemplateResult(\n      promiseDuplicate,\n      this.publish.bind(this)\n    );\n  }\n  async publish(identifier) {\n    const data = await this.resend.post(\n      `/templates/${identifier}/publish`\n    );\n    return data;\n  }\n  async update(identifier, payload) {\n    const data = await this.resend.patch(\n      `/templates/${identifier}`,\n      parseTemplateToApiOptions(payload)\n    );\n    return data;\n  }\n};\n\n// src/topics/topics.ts\nvar Topics = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload) {\n    const _a = payload, { defaultSubscription } = _a, body = __objRest(_a, [\"defaultSubscription\"]);\n    const data = await this.resend.post(\"/topics\", __spreadProps(__spreadValues({}, body), {\n      default_subscription: defaultSubscription\n    }));\n    return data;\n  }\n  async list() {\n    const data = await this.resend.get(\"/topics\");\n    return data;\n  }\n  async get(id) {\n    if (!id) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const data = await this.resend.get(\n      `/topics/${id}`\n    );\n    return data;\n  }\n  async update(payload) {\n    if (!payload.id) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const data = await this.resend.patch(\n      `/topics/${payload.id}`,\n      payload\n    );\n    return data;\n  }\n  async remove(id) {\n    if (!id) {\n      return {\n        data: null,\n        headers: null,\n        error: {\n          message: \"Missing `id` field.\",\n          statusCode: null,\n          name: \"missing_required_field\"\n        }\n      };\n    }\n    const data = await this.resend.delete(\n      `/topics/${id}`\n    );\n    return data;\n  }\n};\n\n// src/webhooks/webhooks.ts\n\nvar Webhooks = class {\n  constructor(resend) {\n    this.resend = resend;\n  }\n  async create(payload, options = {}) {\n    const data = await this.resend.post(\n      \"/webhooks\",\n      payload,\n      options\n    );\n    return data;\n  }\n  async get(id) {\n    const data = await this.resend.get(\n      `/webhooks/${id}`\n    );\n    return data;\n  }\n  async list(options = {}) {\n    const queryString = buildPaginationQuery(options);\n    const url = queryString ? `/webhooks?${queryString}` : \"/webhooks\";\n    const data = await this.resend.get(url);\n    return data;\n  }\n  async update(id, payload) {\n    const data = await this.resend.patch(\n      `/webhooks/${id}`,\n      payload\n    );\n    return data;\n  }\n  async remove(id) {\n    const data = await this.resend.delete(\n      `/webhooks/${id}`\n    );\n    return data;\n  }\n  verify(payload) {\n    const webhook = new svix__WEBPACK_IMPORTED_MODULE_0__.Webhook(payload.webhookSecret);\n    return webhook.verify(payload.payload, {\n      \"svix-id\": payload.headers.id,\n      \"svix-timestamp\": payload.headers.timestamp,\n      \"svix-signature\": payload.headers.signature\n    });\n  }\n};\n\n// src/resend.ts\nvar defaultBaseUrl = \"https://api.resend.com\";\nvar defaultUserAgent = `resend-node:${version}`;\nvar baseUrl = typeof process !== \"undefined\" && process.env ? process.env.RESEND_BASE_URL || defaultBaseUrl : defaultBaseUrl;\nvar userAgent = typeof process !== \"undefined\" && process.env ? process.env.RESEND_USER_AGENT || defaultUserAgent : defaultUserAgent;\nvar Resend = class {\n  constructor(key) {\n    this.key = key;\n    this.apiKeys = new ApiKeys(this);\n    this.segments = new Segments(this);\n    /**\n     * @deprecated Use segments instead\n     */\n    this.audiences = this.segments;\n    this.batch = new Batch(this);\n    this.broadcasts = new Broadcasts(this);\n    this.contacts = new Contacts(this);\n    this.contactProperties = new ContactProperties(this);\n    this.domains = new Domains(this);\n    this.emails = new Emails(this);\n    this.webhooks = new Webhooks(this);\n    this.templates = new Templates(this);\n    this.topics = new Topics(this);\n    if (!key) {\n      if (typeof process !== \"undefined\" && process.env) {\n        this.key = process.env.RESEND_API_KEY;\n      }\n      if (!this.key) {\n        throw new Error(\n          'Missing API key. Pass it to the constructor `new Resend(\"re_123\")`'\n        );\n      }\n    }\n    this.headers = new Headers({\n      Authorization: `Bearer ${this.key}`,\n      \"User-Agent\": userAgent,\n      \"Content-Type\": \"application/json\"\n    });\n  }\n  async fetchRequest(path, options = {}) {\n    try {\n      const response = await fetch(`${baseUrl}${path}`, options);\n      if (!response.ok) {\n        try {\n          const rawError = await response.text();\n          return {\n            data: null,\n            error: JSON.parse(rawError),\n            headers: Object.fromEntries(response.headers.entries())\n          };\n        } catch (err) {\n          if (err instanceof SyntaxError) {\n            return {\n              data: null,\n              error: {\n                name: \"application_error\",\n                statusCode: response.status,\n                message: \"Internal server error. We are unable to process your request right now, please try again later.\"\n              },\n              headers: Object.fromEntries(response.headers.entries())\n            };\n          }\n          const error = {\n            message: response.statusText,\n            statusCode: response.status,\n            name: \"application_error\"\n          };\n          if (err instanceof Error) {\n            return {\n              data: null,\n              error: __spreadProps(__spreadValues({}, error), { message: err.message }),\n              headers: Object.fromEntries(response.headers.entries())\n            };\n          }\n          return {\n            data: null,\n            error,\n            headers: Object.fromEntries(response.headers.entries())\n          };\n        }\n      }\n      const data = await response.json();\n      return {\n        data,\n        error: null,\n        headers: Object.fromEntries(response.headers.entries())\n      };\n    } catch (e) {\n      return {\n        data: null,\n        error: {\n          name: \"application_error\",\n          statusCode: null,\n          message: \"Unable to fetch data. The request could not be resolved.\"\n        },\n        headers: null\n      };\n    }\n  }\n  async post(path, entity, options = {}) {\n    const headers = new Headers(this.headers);\n    if (options.headers) {\n      for (const [key, value] of new Headers(options.headers).entries()) {\n        headers.set(key, value);\n      }\n    }\n    if (options.idempotencyKey) {\n      headers.set(\"Idempotency-Key\", options.idempotencyKey);\n    }\n    const requestOptions = __spreadProps(__spreadValues({\n      method: \"POST\",\n      body: JSON.stringify(entity)\n    }, options), {\n      headers\n    });\n    return this.fetchRequest(path, requestOptions);\n  }\n  async get(path, options = {}) {\n    const headers = new Headers(this.headers);\n    if (options.headers) {\n      for (const [key, value] of new Headers(options.headers).entries()) {\n        headers.set(key, value);\n      }\n    }\n    const requestOptions = __spreadProps(__spreadValues({\n      method: \"GET\"\n    }, options), {\n      headers\n    });\n    return this.fetchRequest(path, requestOptions);\n  }\n  async put(path, entity, options = {}) {\n    const headers = new Headers(this.headers);\n    if (options.headers) {\n      for (const [key, value] of new Headers(options.headers).entries()) {\n        headers.set(key, value);\n      }\n    }\n    const requestOptions = __spreadProps(__spreadValues({\n      method: \"PUT\",\n      body: JSON.stringify(entity)\n    }, options), {\n      headers\n    });\n    return this.fetchRequest(path, requestOptions);\n  }\n  async patch(path, entity, options = {}) {\n    const headers = new Headers(this.headers);\n    if (options.headers) {\n      for (const [key, value] of new Headers(options.headers).entries()) {\n        headers.set(key, value);\n      }\n    }\n    const requestOptions = __spreadProps(__spreadValues({\n      method: \"PATCH\",\n      body: JSON.stringify(entity)\n    }, options), {\n      headers\n    });\n    return this.fetchRequest(path, requestOptions);\n  }\n  async delete(path, query) {\n    const requestOptions = {\n      method: \"DELETE\",\n      body: JSON.stringify(query),\n      headers: this.headers\n    };\n    return this.fetchRequest(path, requestOptions);\n  }\n};\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL3Jlc2VuZEA2LjQuMi9ub2RlX21vZHVsZXMvcmVzZW5kL2Rpc3QvaW5kZXgubWpzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEVBQThFLDZEQUE2RDtBQUMzSTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLDJDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsR0FBRztBQUN0QjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLGtCQUFrQixRQUFRLDRJQUE2QjtBQUM5RCxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFDQUFxQztBQUNyQztBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixHQUFHO0FBQ3hCLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSw2Q0FBNkMsWUFBWTtBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLEdBQUc7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQixHQUFHO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsR0FBRztBQUN4QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLHFEQUFxRCxZQUFZO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBLDZDQUE2QztBQUM3QztBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsR0FBRztBQUNoQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2QkFBNkIsV0FBVztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLEdBQUc7QUFDaEM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQ0FBMkMsV0FBVyxZQUFZLFlBQVksaUJBQWlCLFdBQVc7QUFDMUc7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixXQUFXLFlBQVksa0JBQWtCO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFdBQVcsWUFBWSxrQkFBa0I7QUFDNUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLFdBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDJDQUEyQyxXQUFXLFVBQVUsWUFBWSxpQkFBaUIsV0FBVztBQUN4RztBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUJBQW1CO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtDQUErQyxhQUFhO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLFVBQVUsWUFBWSxZQUFZLGlCQUFpQixVQUFVO0FBQ3hHO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQ0FBMEMsUUFBUTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDhIQUE4SDtBQUNuSjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUJBQW1CLFlBQVksOEhBQThIO0FBQ2pMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDhIQUE4SDtBQUNuSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixtQkFBbUIsWUFBWSw4SEFBOEg7QUFDakw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLFFBQVE7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCLDhIQUE4SDtBQUNuSjtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsbUJBQW1CLFlBQVksOEhBQThIO0FBQ2pMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSwwQ0FBMEMsWUFBWTtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLEdBQUc7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixXQUFXO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLEdBQUc7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQixHQUFHO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksY0FBYztBQUMxQjtBQUNBLGlCQUFpQixRQUFRLGVBQWUsR0FBRztBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksVUFBVTtBQUN0QjtBQUNBLHlDQUF5QyxRQUFRLGVBQWUsWUFBWSxlQUFlLFFBQVE7QUFDbkc7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxjQUFjO0FBQzFCO0FBQ0EsMkJBQTJCLFFBQVEsZUFBZSxHQUFHO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSxVQUFVO0FBQ3RCO0FBQ0EsbURBQW1ELFFBQVEsZUFBZSxZQUFZLHlCQUF5QixRQUFRO0FBQ3ZIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsR0FBRztBQUM5QjtBQUNBO0FBQ0E7QUFDQSx5QkFBeUI7QUFDekI7QUFDQSxtREFBbUQsWUFBWTtBQUMvRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixHQUFHO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLHlDQUF5QyxZQUFZO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsV0FBVztBQUM1QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLEdBQUc7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLDJDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsR0FBRztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLEdBQUc7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxrREFBa0Q7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4QkFBOEIsaUJBQWlCO0FBQy9DOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksY0FBYztBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCLGNBQWMsUUFBUSw0SUFBNkI7QUFDckU7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsV0FBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0EsbUJBQW1CLHNDQUFzQztBQUN6RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixXQUFXO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsV0FBVztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLFdBQVc7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsc0JBQXNCO0FBQ2hELGtGQUFrRjtBQUNsRjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixHQUFHO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLFdBQVc7QUFDNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixHQUFHO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQytCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQixHQUFHO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QjtBQUNBLDJDQUEyQyxZQUFZO0FBQ3ZEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsR0FBRztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsR0FBRztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5Q0FBTztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0MsUUFBUTtBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQixTQUFTO0FBQ3hDO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSx1Q0FBdUM7QUFDdkM7QUFDQSxzQ0FBc0MsUUFBUSxFQUFFLEtBQUs7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDVjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0RBQW9ELFlBQVksc0JBQXNCO0FBQ3RGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLDhCQUE4QjtBQUM5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFHRSIsInNvdXJjZXMiOlsiL1VzZXJzL2Rhbi9TaXRlcy9zb21ldGhpbmcvbm9kZV9tb2R1bGVzLy5wbnBtL3Jlc2VuZEA2LjQuMi9ub2RlX21vZHVsZXMvcmVzZW5kL2Rpc3QvaW5kZXgubWpzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBfX2RlZlByb3AgPSBPYmplY3QuZGVmaW5lUHJvcGVydHk7XG52YXIgX19kZWZQcm9wcyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzO1xudmFyIF9fZ2V0T3duUHJvcERlc2NzID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnM7XG52YXIgX19nZXRPd25Qcm9wU3ltYm9scyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM7XG52YXIgX19oYXNPd25Qcm9wID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbnZhciBfX3Byb3BJc0VudW0gPSBPYmplY3QucHJvdG90eXBlLnByb3BlcnR5SXNFbnVtZXJhYmxlO1xudmFyIF9fZGVmTm9ybWFsUHJvcCA9IChvYmosIGtleSwgdmFsdWUpID0+IGtleSBpbiBvYmogPyBfX2RlZlByb3Aob2JqLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSwgdmFsdWUgfSkgOiBvYmpba2V5XSA9IHZhbHVlO1xudmFyIF9fc3ByZWFkVmFsdWVzID0gKGEsIGIpID0+IHtcbiAgZm9yICh2YXIgcHJvcCBpbiBiIHx8IChiID0ge30pKVxuICAgIGlmIChfX2hhc093blByb3AuY2FsbChiLCBwcm9wKSlcbiAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgaWYgKF9fZ2V0T3duUHJvcFN5bWJvbHMpXG4gICAgZm9yICh2YXIgcHJvcCBvZiBfX2dldE93blByb3BTeW1ib2xzKGIpKSB7XG4gICAgICBpZiAoX19wcm9wSXNFbnVtLmNhbGwoYiwgcHJvcCkpXG4gICAgICAgIF9fZGVmTm9ybWFsUHJvcChhLCBwcm9wLCBiW3Byb3BdKTtcbiAgICB9XG4gIHJldHVybiBhO1xufTtcbnZhciBfX3NwcmVhZFByb3BzID0gKGEsIGIpID0+IF9fZGVmUHJvcHMoYSwgX19nZXRPd25Qcm9wRGVzY3MoYikpO1xudmFyIF9fb2JqUmVzdCA9IChzb3VyY2UsIGV4Y2x1ZGUpID0+IHtcbiAgdmFyIHRhcmdldCA9IHt9O1xuICBmb3IgKHZhciBwcm9wIGluIHNvdXJjZSlcbiAgICBpZiAoX19oYXNPd25Qcm9wLmNhbGwoc291cmNlLCBwcm9wKSAmJiBleGNsdWRlLmluZGV4T2YocHJvcCkgPCAwKVxuICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICBpZiAoc291cmNlICE9IG51bGwgJiYgX19nZXRPd25Qcm9wU3ltYm9scylcbiAgICBmb3IgKHZhciBwcm9wIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHMoc291cmNlKSkge1xuICAgICAgaWYgKGV4Y2x1ZGUuaW5kZXhPZihwcm9wKSA8IDAgJiYgX19wcm9wSXNFbnVtLmNhbGwoc291cmNlLCBwcm9wKSlcbiAgICAgICAgdGFyZ2V0W3Byb3BdID0gc291cmNlW3Byb3BdO1xuICAgIH1cbiAgcmV0dXJuIHRhcmdldDtcbn07XG5cbi8vIHBhY2thZ2UuanNvblxudmFyIHZlcnNpb24gPSBcIjYuNC4yXCI7XG5cbi8vIHNyYy9jb21tb24vdXRpbHMvYnVpbGQtcGFnaW5hdGlvbi1xdWVyeS50c1xuZnVuY3Rpb24gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucykge1xuICBjb25zdCBzZWFyY2hQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIGlmIChvcHRpb25zLmxpbWl0ICE9PSB2b2lkIDApIHtcbiAgICBzZWFyY2hQYXJhbXMuc2V0KFwibGltaXRcIiwgb3B0aW9ucy5saW1pdC50b1N0cmluZygpKTtcbiAgfVxuICBpZiAoXCJhZnRlclwiIGluIG9wdGlvbnMgJiYgb3B0aW9ucy5hZnRlciAhPT0gdm9pZCAwKSB7XG4gICAgc2VhcmNoUGFyYW1zLnNldChcImFmdGVyXCIsIG9wdGlvbnMuYWZ0ZXIpO1xuICB9XG4gIGlmIChcImJlZm9yZVwiIGluIG9wdGlvbnMgJiYgb3B0aW9ucy5iZWZvcmUgIT09IHZvaWQgMCkge1xuICAgIHNlYXJjaFBhcmFtcy5zZXQoXCJiZWZvcmVcIiwgb3B0aW9ucy5iZWZvcmUpO1xuICB9XG4gIHJldHVybiBzZWFyY2hQYXJhbXMudG9TdHJpbmcoKTtcbn1cblxuLy8gc3JjL2FwaS1rZXlzL2FwaS1rZXlzLnRzXG52YXIgQXBpS2V5cyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgXCIvYXBpLWtleXNcIixcbiAgICAgIHBheWxvYWQsXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG4gICAgY29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2FwaS1rZXlzPyR7cXVlcnlTdHJpbmd9YCA6IFwiL2FwaS1rZXlzXCI7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHJlbW92ZShpZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5kZWxldGUoXG4gICAgICBgL2FwaS1rZXlzLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbn07XG5cbi8vIHNyYy9jb21tb24vdXRpbHMvcGFyc2UtZW1haWwtdG8tYXBpLW9wdGlvbnMudHNcbmZ1bmN0aW9uIHBhcnNlQXR0YWNobWVudHMoYXR0YWNobWVudHMpIHtcbiAgcmV0dXJuIGF0dGFjaG1lbnRzID09IG51bGwgPyB2b2lkIDAgOiBhdHRhY2htZW50cy5tYXAoKGF0dGFjaG1lbnQpID0+ICh7XG4gICAgY29udGVudDogYXR0YWNobWVudC5jb250ZW50LFxuICAgIGZpbGVuYW1lOiBhdHRhY2htZW50LmZpbGVuYW1lLFxuICAgIHBhdGg6IGF0dGFjaG1lbnQucGF0aCxcbiAgICBjb250ZW50X3R5cGU6IGF0dGFjaG1lbnQuY29udGVudFR5cGUsXG4gICAgY29udGVudF9pZDogYXR0YWNobWVudC5jb250ZW50SWRcbiAgfSkpO1xufVxuZnVuY3Rpb24gcGFyc2VFbWFpbFRvQXBpT3B0aW9ucyhlbWFpbCkge1xuICByZXR1cm4ge1xuICAgIGF0dGFjaG1lbnRzOiBwYXJzZUF0dGFjaG1lbnRzKGVtYWlsLmF0dGFjaG1lbnRzKSxcbiAgICBiY2M6IGVtYWlsLmJjYyxcbiAgICBjYzogZW1haWwuY2MsXG4gICAgZnJvbTogZW1haWwuZnJvbSxcbiAgICBoZWFkZXJzOiBlbWFpbC5oZWFkZXJzLFxuICAgIGh0bWw6IGVtYWlsLmh0bWwsXG4gICAgcmVwbHlfdG86IGVtYWlsLnJlcGx5VG8sXG4gICAgc2NoZWR1bGVkX2F0OiBlbWFpbC5zY2hlZHVsZWRBdCxcbiAgICBzdWJqZWN0OiBlbWFpbC5zdWJqZWN0LFxuICAgIHRhZ3M6IGVtYWlsLnRhZ3MsXG4gICAgdGV4dDogZW1haWwudGV4dCxcbiAgICB0bzogZW1haWwudG8sXG4gICAgdGVtcGxhdGU6IGVtYWlsLnRlbXBsYXRlID8ge1xuICAgICAgaWQ6IGVtYWlsLnRlbXBsYXRlLmlkLFxuICAgICAgdmFyaWFibGVzOiBlbWFpbC50ZW1wbGF0ZS52YXJpYWJsZXNcbiAgICB9IDogdm9pZCAwLFxuICAgIHRvcGljX2lkOiBlbWFpbC50b3BpY0lkXG4gIH07XG59XG5cbi8vIHNyYy9yZW5kZXIudHNcbmFzeW5jIGZ1bmN0aW9uIHJlbmRlcihub2RlKSB7XG4gIGxldCByZW5kZXIyO1xuICB0cnkge1xuICAgICh7IHJlbmRlcjogcmVuZGVyMiB9ID0gYXdhaXQgaW1wb3J0KFwiQHJlYWN0LWVtYWlsL3JlbmRlclwiKSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBcIkZhaWxlZCB0byByZW5kZXIgUmVhY3QgY29tcG9uZW50LiBNYWtlIHN1cmUgdG8gaW5zdGFsbCBgQHJlYWN0LWVtYWlsL3JlbmRlcmAgb3IgYEByZWFjdC1lbWFpbC9jb21wb25lbnRzYC5cIlxuICAgICk7XG4gIH1cbiAgcmV0dXJuIHJlbmRlcjIobm9kZSk7XG59XG5cbi8vIHNyYy9iYXRjaC9iYXRjaC50c1xudmFyIEJhdGNoID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyBzZW5kKHBheWxvYWQsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGUocGF5bG9hZCwgb3B0aW9ucyk7XG4gIH1cbiAgYXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMpIHtcbiAgICB2YXIgX2E7XG4gICAgY29uc3QgZW1haWxzID0gW107XG4gICAgZm9yIChjb25zdCBlbWFpbCBvZiBwYXlsb2FkKSB7XG4gICAgICBpZiAoZW1haWwucmVhY3QpIHtcbiAgICAgICAgZW1haWwuaHRtbCA9IGF3YWl0IHJlbmRlcihlbWFpbC5yZWFjdCk7XG4gICAgICAgIGVtYWlsLnJlYWN0ID0gdm9pZCAwO1xuICAgICAgfVxuICAgICAgZW1haWxzLnB1c2gocGFyc2VFbWFpbFRvQXBpT3B0aW9ucyhlbWFpbCkpO1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIFwiL2VtYWlscy9iYXRjaFwiLFxuICAgICAgZW1haWxzLFxuICAgICAgX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwgb3B0aW9ucyksIHtcbiAgICAgICAgaGVhZGVyczogX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgICAgIFwieC1iYXRjaC12YWxpZGF0aW9uXCI6IChfYSA9IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuYmF0Y2hWYWxpZGF0aW9uKSAhPSBudWxsID8gX2EgOiBcInN0cmljdFwiXG4gICAgICAgIH0sIG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuaGVhZGVycylcbiAgICAgIH0pXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcblxuLy8gc3JjL2Jyb2FkY2FzdHMvYnJvYWRjYXN0cy50c1xudmFyIEJyb2FkY2FzdHMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuICAgIHRoaXMucmVzZW5kID0gcmVzZW5kO1xuICB9XG4gIGFzeW5jIGNyZWF0ZShwYXlsb2FkLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAocGF5bG9hZC5yZWFjdCkge1xuICAgICAgcGF5bG9hZC5odG1sID0gYXdhaXQgcmVuZGVyKHBheWxvYWQucmVhY3QpO1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIFwiL2Jyb2FkY2FzdHNcIixcbiAgICAgIHtcbiAgICAgICAgbmFtZTogcGF5bG9hZC5uYW1lLFxuICAgICAgICBzZWdtZW50X2lkOiBwYXlsb2FkLnNlZ21lbnRJZCxcbiAgICAgICAgYXVkaWVuY2VfaWQ6IHBheWxvYWQuYXVkaWVuY2VJZCxcbiAgICAgICAgcHJldmlld190ZXh0OiBwYXlsb2FkLnByZXZpZXdUZXh0LFxuICAgICAgICBmcm9tOiBwYXlsb2FkLmZyb20sXG4gICAgICAgIGh0bWw6IHBheWxvYWQuaHRtbCxcbiAgICAgICAgcmVwbHlfdG86IHBheWxvYWQucmVwbHlUbyxcbiAgICAgICAgc3ViamVjdDogcGF5bG9hZC5zdWJqZWN0LFxuICAgICAgICB0ZXh0OiBwYXlsb2FkLnRleHQsXG4gICAgICAgIHRvcGljX2lkOiBwYXlsb2FkLnRvcGljSWRcbiAgICAgIH0sXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBzZW5kKGlkLCBwYXlsb2FkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBgL2Jyb2FkY2FzdHMvJHtpZH0vc2VuZGAsXG4gICAgICB7IHNjaGVkdWxlZF9hdDogcGF5bG9hZCA9PSBudWxsID8gdm9pZCAwIDogcGF5bG9hZC5zY2hlZHVsZWRBdCB9XG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG4gICAgY29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2Jyb2FkY2FzdHM/JHtxdWVyeVN0cmluZ31gIDogXCIvYnJvYWRjYXN0c1wiO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBnZXQoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KFxuICAgICAgYC9icm9hZGNhc3RzLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlKGlkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShcbiAgICAgIGAvYnJvYWRjYXN0cy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHVwZGF0ZShpZCwgcGF5bG9hZCkge1xuICAgIGlmIChwYXlsb2FkLnJlYWN0KSB7XG4gICAgICBwYXlsb2FkLmh0bWwgPSBhd2FpdCByZW5kZXIocGF5bG9hZC5yZWFjdCk7XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChcbiAgICAgIGAvYnJvYWRjYXN0cy8ke2lkfWAsXG4gICAgICB7XG4gICAgICAgIG5hbWU6IHBheWxvYWQubmFtZSxcbiAgICAgICAgc2VnbWVudF9pZDogcGF5bG9hZC5zZWdtZW50SWQsXG4gICAgICAgIGF1ZGllbmNlX2lkOiBwYXlsb2FkLmF1ZGllbmNlSWQsXG4gICAgICAgIGZyb206IHBheWxvYWQuZnJvbSxcbiAgICAgICAgaHRtbDogcGF5bG9hZC5odG1sLFxuICAgICAgICB0ZXh0OiBwYXlsb2FkLnRleHQsXG4gICAgICAgIHN1YmplY3Q6IHBheWxvYWQuc3ViamVjdCxcbiAgICAgICAgcmVwbHlfdG86IHBheWxvYWQucmVwbHlUbyxcbiAgICAgICAgcHJldmlld190ZXh0OiBwYXlsb2FkLnByZXZpZXdUZXh0LFxuICAgICAgICB0b3BpY19pZDogcGF5bG9hZC50b3BpY0lkXG4gICAgICB9XG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcblxuLy8gc3JjL2NvbW1vbi91dGlscy9wYXJzZS1jb250YWN0LXByb3BlcnRpZXMtdG8tYXBpLW9wdGlvbnMudHNcbmZ1bmN0aW9uIHBhcnNlQ29udGFjdFByb3BlcnR5RnJvbUFwaShjb250YWN0UHJvcGVydHkpIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogY29udGFjdFByb3BlcnR5LmlkLFxuICAgIGtleTogY29udGFjdFByb3BlcnR5LmtleSxcbiAgICBjcmVhdGVkQXQ6IGNvbnRhY3RQcm9wZXJ0eS5jcmVhdGVkX2F0LFxuICAgIHR5cGU6IGNvbnRhY3RQcm9wZXJ0eS50eXBlLFxuICAgIGZhbGxiYWNrVmFsdWU6IGNvbnRhY3RQcm9wZXJ0eS5mYWxsYmFja192YWx1ZVxuICB9O1xufVxuZnVuY3Rpb24gcGFyc2VDb250YWN0UHJvcGVydHlUb0FwaU9wdGlvbnMoY29udGFjdFByb3BlcnR5KSB7XG4gIGlmIChcImtleVwiIGluIGNvbnRhY3RQcm9wZXJ0eSkge1xuICAgIHJldHVybiB7XG4gICAgICBrZXk6IGNvbnRhY3RQcm9wZXJ0eS5rZXksXG4gICAgICB0eXBlOiBjb250YWN0UHJvcGVydHkudHlwZSxcbiAgICAgIGZhbGxiYWNrX3ZhbHVlOiBjb250YWN0UHJvcGVydHkuZmFsbGJhY2tWYWx1ZVxuICAgIH07XG4gIH1cbiAgcmV0dXJuIHtcbiAgICBmYWxsYmFja192YWx1ZTogY29udGFjdFByb3BlcnR5LmZhbGxiYWNrVmFsdWVcbiAgfTtcbn1cblxuLy8gc3JjL2NvbnRhY3QtcHJvcGVydGllcy9jb250YWN0LXByb3BlcnRpZXMudHNcbnZhciBDb250YWN0UHJvcGVydGllcyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlKG9wdGlvbnMpIHtcbiAgICBjb25zdCBhcGlPcHRpb25zID0gcGFyc2VDb250YWN0UHJvcGVydHlUb0FwaU9wdGlvbnMob3B0aW9ucyk7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBcIi9jb250YWN0LXByb3BlcnRpZXNcIixcbiAgICAgIGFwaU9wdGlvbnNcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvY29udGFjdC1wcm9wZXJ0aWVzPyR7cXVlcnlTdHJpbmd9YCA6IFwiL2NvbnRhY3QtcHJvcGVydGllc1wiO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG4gICAgaWYgKHJlc3BvbnNlLmRhdGEpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30sIHJlc3BvbnNlLmRhdGEpLCB7XG4gICAgICAgICAgZGF0YTogcmVzcG9uc2UuZGF0YS5kYXRhLm1hcChcbiAgICAgICAgICAgIChhcGlDb250YWN0UHJvcGVydHkpID0+IHBhcnNlQ29udGFjdFByb3BlcnR5RnJvbUFwaShhcGlDb250YWN0UHJvcGVydHkpXG4gICAgICAgICAgKVxuICAgICAgICB9KSxcbiAgICAgICAgaGVhZGVyczogcmVzcG9uc2UuaGVhZGVycyxcbiAgICAgICAgZXJyb3I6IG51bGxcbiAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiByZXNwb25zZTtcbiAgfVxuICBhc3luYyBnZXQoaWQpIHtcbiAgICBpZiAoIWlkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIGZpZWxkLlwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoXG4gICAgICBgL2NvbnRhY3QtcHJvcGVydGllcy8ke2lkfWBcbiAgICApO1xuICAgIGlmIChyZXNwb25zZS5kYXRhKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBfX3NwcmVhZFZhbHVlcyh7XG4gICAgICAgICAgb2JqZWN0OiBcImNvbnRhY3RfcHJvcGVydHlcIlxuICAgICAgICB9LCBwYXJzZUNvbnRhY3RQcm9wZXJ0eUZyb21BcGkocmVzcG9uc2UuZGF0YSkpLFxuICAgICAgICBoZWFkZXJzOiByZXNwb25zZS5oZWFkZXJzLFxuICAgICAgICBlcnJvcjogbnVsbFxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3BvbnNlO1xuICB9XG4gIGFzeW5jIHVwZGF0ZShwYXlsb2FkKSB7XG4gICAgaWYgKCFwYXlsb2FkLmlkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIGZpZWxkLlwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgYXBpT3B0aW9ucyA9IHBhcnNlQ29udGFjdFByb3BlcnR5VG9BcGlPcHRpb25zKHBheWxvYWQpO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChcbiAgICAgIGAvY29udGFjdC1wcm9wZXJ0aWVzLyR7cGF5bG9hZC5pZH1gLFxuICAgICAgYXBpT3B0aW9uc1xuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlKGlkKSB7XG4gICAgaWYgKCFpZCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgaGVhZGVyczogbnVsbCxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBmaWVsZC5cIixcbiAgICAgICAgICBzdGF0dXNDb2RlOiBudWxsLFxuICAgICAgICAgIG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5kZWxldGUoXG4gICAgICBgL2NvbnRhY3QtcHJvcGVydGllcy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59O1xuXG4vLyBzcmMvY29udGFjdHMvc2VnbWVudHMvY29udGFjdC1zZWdtZW50cy50c1xudmFyIENvbnRhY3RTZWdtZW50cyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gIH1cbiAgYXN5bmMgbGlzdChvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zLmNvbnRhY3RJZCAmJiAhb3B0aW9ucy5lbWFpbCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgaGVhZGVyczogbnVsbCxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBvciBgZW1haWxgIGZpZWxkLlwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgaWRlbnRpZmllciA9IG9wdGlvbnMuZW1haWwgPyBvcHRpb25zLmVtYWlsIDogb3B0aW9ucy5jb250YWN0SWQ7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvY29udGFjdHMvJHtpZGVudGlmaWVyfS9zZWdtZW50cz8ke3F1ZXJ5U3RyaW5nfWAgOiBgL2NvbnRhY3RzLyR7aWRlbnRpZmllcn0vc2VnbWVudHNgO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBhZGQob3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucy5jb250YWN0SWQgJiYgIW9wdGlvbnMuZW1haWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGhlYWRlcnM6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgb3IgYGVtYWlsYCBmaWVsZC5cIixcbiAgICAgICAgICBzdGF0dXNDb2RlOiBudWxsLFxuICAgICAgICAgIG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGlkZW50aWZpZXIgPSBvcHRpb25zLmVtYWlsID8gb3B0aW9ucy5lbWFpbCA6IG9wdGlvbnMuY29udGFjdElkO1xuICAgIHJldHVybiB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgYC9jb250YWN0cy8ke2lkZW50aWZpZXJ9L3NlZ21lbnRzLyR7b3B0aW9ucy5zZWdtZW50SWR9YFxuICAgICk7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlKG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMuY29udGFjdElkICYmICFvcHRpb25zLmVtYWlsKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIG9yIGBlbWFpbGAgZmllbGQuXCIsXG4gICAgICAgICAgc3RhdHVzQ29kZTogbnVsbCxcbiAgICAgICAgICBuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBpZGVudGlmaWVyID0gb3B0aW9ucy5lbWFpbCA/IG9wdGlvbnMuZW1haWwgOiBvcHRpb25zLmNvbnRhY3RJZDtcbiAgICByZXR1cm4gdGhpcy5yZXNlbmQuZGVsZXRlKFxuICAgICAgYC9jb250YWN0cy8ke2lkZW50aWZpZXJ9L3NlZ21lbnRzLyR7b3B0aW9ucy5zZWdtZW50SWR9YFxuICAgICk7XG4gIH1cbn07XG5cbi8vIHNyYy9jb250YWN0cy90b3BpY3MvY29udGFjdC10b3BpY3MudHNcbnZhciBDb250YWN0VG9waWNzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyB1cGRhdGUocGF5bG9hZCkge1xuICAgIGlmICghcGF5bG9hZC5pZCAmJiAhcGF5bG9hZC5lbWFpbCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgaGVhZGVyczogbnVsbCxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBvciBgZW1haWxgIGZpZWxkLlwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgaWRlbnRpZmllciA9IHBheWxvYWQuZW1haWwgPyBwYXlsb2FkLmVtYWlsIDogcGF5bG9hZC5pZDtcbiAgICByZXR1cm4gdGhpcy5yZXNlbmQucGF0Y2goXG4gICAgICBgL2NvbnRhY3RzLyR7aWRlbnRpZmllcn0vdG9waWNzYCxcbiAgICAgIHBheWxvYWQudG9waWNzXG4gICAgKTtcbiAgfVxuICBhc3luYyBsaXN0KG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMuaWQgJiYgIW9wdGlvbnMuZW1haWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGhlYWRlcnM6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgb3IgYGVtYWlsYCBmaWVsZC5cIixcbiAgICAgICAgICBzdGF0dXNDb2RlOiBudWxsLFxuICAgICAgICAgIG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGNvbnN0IGlkZW50aWZpZXIgPSBvcHRpb25zLmVtYWlsID8gb3B0aW9ucy5lbWFpbCA6IG9wdGlvbnMuaWQ7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvY29udGFjdHMvJHtpZGVudGlmaWVyfS90b3BpY3M/JHtxdWVyeVN0cmluZ31gIDogYC9jb250YWN0cy8ke2lkZW50aWZpZXJ9L3RvcGljc2A7XG4gICAgcmV0dXJuIHRoaXMucmVzZW5kLmdldCh1cmwpO1xuICB9XG59O1xuXG4vLyBzcmMvY29udGFjdHMvY29udGFjdHMudHNcbnZhciBDb250YWN0cyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gICAgdGhpcy50b3BpY3MgPSBuZXcgQ29udGFjdFRvcGljcyh0aGlzLnJlc2VuZCk7XG4gICAgdGhpcy5zZWdtZW50cyA9IG5ldyBDb250YWN0U2VnbWVudHModGhpcy5yZXNlbmQpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZShwYXlsb2FkLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAoIXBheWxvYWQuYXVkaWVuY2VJZCkge1xuICAgICAgY29uc3QgZGF0YTIgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgICBcIi9jb250YWN0c1wiLFxuICAgICAgICB7XG4gICAgICAgICAgdW5zdWJzY3JpYmVkOiBwYXlsb2FkLnVuc3Vic2NyaWJlZCxcbiAgICAgICAgICBlbWFpbDogcGF5bG9hZC5lbWFpbCxcbiAgICAgICAgICBmaXJzdF9uYW1lOiBwYXlsb2FkLmZpcnN0TmFtZSxcbiAgICAgICAgICBsYXN0X25hbWU6IHBheWxvYWQubGFzdE5hbWUsXG4gICAgICAgICAgcHJvcGVydGllczogcGF5bG9hZC5wcm9wZXJ0aWVzXG4gICAgICAgIH0sXG4gICAgICAgIG9wdGlvbnNcbiAgICAgICk7XG4gICAgICByZXR1cm4gZGF0YTI7XG4gICAgfVxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgYC9hdWRpZW5jZXMvJHtwYXlsb2FkLmF1ZGllbmNlSWR9L2NvbnRhY3RzYCxcbiAgICAgIHtcbiAgICAgICAgdW5zdWJzY3JpYmVkOiBwYXlsb2FkLnVuc3Vic2NyaWJlZCxcbiAgICAgICAgZW1haWw6IHBheWxvYWQuZW1haWwsXG4gICAgICAgIGZpcnN0X25hbWU6IHBheWxvYWQuZmlyc3ROYW1lLFxuICAgICAgICBsYXN0X25hbWU6IHBheWxvYWQubGFzdE5hbWUsXG4gICAgICAgIHByb3BlcnRpZXM6IHBheWxvYWQucHJvcGVydGllc1xuICAgICAgfSxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG4gICAgdmFyIF9hO1xuICAgIGNvbnN0IHNlZ21lbnRJZCA9IChfYSA9IG9wdGlvbnMuc2VnbWVudElkKSAhPSBudWxsID8gX2EgOiBvcHRpb25zLmF1ZGllbmNlSWQ7XG4gICAgaWYgKCFzZWdtZW50SWQpIHtcbiAgICAgIGNvbnN0IHF1ZXJ5U3RyaW5nMiA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuICAgICAgY29uc3QgdXJsMiA9IHF1ZXJ5U3RyaW5nMiA/IGAvY29udGFjdHM/JHtxdWVyeVN0cmluZzJ9YCA6IFwiL2NvbnRhY3RzXCI7XG4gICAgICBjb25zdCBkYXRhMiA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwyKTtcbiAgICAgIHJldHVybiBkYXRhMjtcbiAgICB9XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvc2VnbWVudHMvJHtzZWdtZW50SWR9L2NvbnRhY3RzPyR7cXVlcnlTdHJpbmd9YCA6IGAvc2VnbWVudHMvJHtzZWdtZW50SWR9L2NvbnRhY3RzYDtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgZ2V0KG9wdGlvbnMpIHtcbiAgICBpZiAodHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc2VuZC5nZXQoYC9jb250YWN0cy8ke29wdGlvbnN9YCk7XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5pZCAmJiAhb3B0aW9ucy5lbWFpbCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgaGVhZGVyczogbnVsbCxcbiAgICAgICAgZXJyb3I6IHtcbiAgICAgICAgICBtZXNzYWdlOiBcIk1pc3NpbmcgYGlkYCBvciBgZW1haWxgIGZpZWxkLlwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCFvcHRpb25zLmF1ZGllbmNlSWQpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc2VuZC5nZXQoXG4gICAgICAgIGAvY29udGFjdHMvJHsob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5lbWFpbCkgPyBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmVtYWlsIDogb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5pZH1gXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZXNlbmQuZ2V0KFxuICAgICAgYC9hdWRpZW5jZXMvJHtvcHRpb25zLmF1ZGllbmNlSWR9L2NvbnRhY3RzLyR7KG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZW1haWwpID8gb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5lbWFpbCA6IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuaWR9YFxuICAgICk7XG4gIH1cbiAgYXN5bmMgdXBkYXRlKG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMuaWQgJiYgIW9wdGlvbnMuZW1haWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGhlYWRlcnM6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgb3IgYGVtYWlsYCBmaWVsZC5cIixcbiAgICAgICAgICBzdGF0dXNDb2RlOiBudWxsLFxuICAgICAgICAgIG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghb3B0aW9ucy5hdWRpZW5jZUlkKSB7XG4gICAgICBjb25zdCBkYXRhMiA9IGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKFxuICAgICAgICBgL2NvbnRhY3RzLyR7KG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuZW1haWwpID8gb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5lbWFpbCA6IG9wdGlvbnMgPT0gbnVsbCA/IHZvaWQgMCA6IG9wdGlvbnMuaWR9YCxcbiAgICAgICAge1xuICAgICAgICAgIHVuc3Vic2NyaWJlZDogb3B0aW9ucy51bnN1YnNjcmliZWQsXG4gICAgICAgICAgZmlyc3RfbmFtZTogb3B0aW9ucy5maXJzdE5hbWUsXG4gICAgICAgICAgbGFzdF9uYW1lOiBvcHRpb25zLmxhc3ROYW1lLFxuICAgICAgICAgIHByb3BlcnRpZXM6IG9wdGlvbnMucHJvcGVydGllc1xuICAgICAgICB9XG4gICAgICApO1xuICAgICAgcmV0dXJuIGRhdGEyO1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucGF0Y2goXG4gICAgICBgL2F1ZGllbmNlcy8ke29wdGlvbnMuYXVkaWVuY2VJZH0vY29udGFjdHMvJHsob3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5lbWFpbCkgPyBvcHRpb25zID09IG51bGwgPyB2b2lkIDAgOiBvcHRpb25zLmVtYWlsIDogb3B0aW9ucyA9PSBudWxsID8gdm9pZCAwIDogb3B0aW9ucy5pZH1gLFxuICAgICAge1xuICAgICAgICB1bnN1YnNjcmliZWQ6IG9wdGlvbnMudW5zdWJzY3JpYmVkLFxuICAgICAgICBmaXJzdF9uYW1lOiBvcHRpb25zLmZpcnN0TmFtZSxcbiAgICAgICAgbGFzdF9uYW1lOiBvcHRpb25zLmxhc3ROYW1lLFxuICAgICAgICBwcm9wZXJ0aWVzOiBvcHRpb25zLnByb3BlcnRpZXNcbiAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHJlbW92ZShwYXlsb2FkKSB7XG4gICAgaWYgKHR5cGVvZiBwYXlsb2FkID09PSBcInN0cmluZ1wiKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXNlbmQuZGVsZXRlKFxuICAgICAgICBgL2NvbnRhY3RzLyR7cGF5bG9hZH1gXG4gICAgICApO1xuICAgIH1cbiAgICBpZiAoIXBheWxvYWQuaWQgJiYgIXBheWxvYWQuZW1haWwpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGhlYWRlcnM6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgb3IgYGVtYWlsYCBmaWVsZC5cIixcbiAgICAgICAgICBzdGF0dXNDb2RlOiBudWxsLFxuICAgICAgICAgIG5hbWU6IFwibWlzc2luZ19yZXF1aXJlZF9maWVsZFwiXG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICAgIGlmICghcGF5bG9hZC5hdWRpZW5jZUlkKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXNlbmQuZGVsZXRlKFxuICAgICAgICBgL2NvbnRhY3RzLyR7KHBheWxvYWQgPT0gbnVsbCA/IHZvaWQgMCA6IHBheWxvYWQuZW1haWwpID8gcGF5bG9hZCA9PSBudWxsID8gdm9pZCAwIDogcGF5bG9hZC5lbWFpbCA6IHBheWxvYWQgPT0gbnVsbCA/IHZvaWQgMCA6IHBheWxvYWQuaWR9YFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVzZW5kLmRlbGV0ZShcbiAgICAgIGAvYXVkaWVuY2VzLyR7cGF5bG9hZC5hdWRpZW5jZUlkfS9jb250YWN0cy8keyhwYXlsb2FkID09IG51bGwgPyB2b2lkIDAgOiBwYXlsb2FkLmVtYWlsKSA/IHBheWxvYWQgPT0gbnVsbCA/IHZvaWQgMCA6IHBheWxvYWQuZW1haWwgOiBwYXlsb2FkID09IG51bGwgPyB2b2lkIDAgOiBwYXlsb2FkLmlkfWBcbiAgICApO1xuICB9XG59O1xuXG4vLyBzcmMvY29tbW9uL3V0aWxzL3BhcnNlLWRvbWFpbi10by1hcGktb3B0aW9ucy50c1xuZnVuY3Rpb24gcGFyc2VEb21haW5Ub0FwaU9wdGlvbnMoZG9tYWluKSB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogZG9tYWluLm5hbWUsXG4gICAgcmVnaW9uOiBkb21haW4ucmVnaW9uLFxuICAgIGN1c3RvbV9yZXR1cm5fcGF0aDogZG9tYWluLmN1c3RvbVJldHVyblBhdGhcbiAgfTtcbn1cblxuLy8gc3JjL2RvbWFpbnMvZG9tYWlucy50c1xudmFyIERvbWFpbnMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuICAgIHRoaXMucmVzZW5kID0gcmVzZW5kO1xuICB9XG4gIGFzeW5jIGNyZWF0ZShwYXlsb2FkLCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIFwiL2RvbWFpbnNcIixcbiAgICAgIHBhcnNlRG9tYWluVG9BcGlPcHRpb25zKHBheWxvYWQpLFxuICAgICAgb3B0aW9uc1xuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgbGlzdChvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuICAgIGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9kb21haW5zPyR7cXVlcnlTdHJpbmd9YCA6IFwiL2RvbWFpbnNcIjtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgZ2V0KGlkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldChcbiAgICAgIGAvZG9tYWlucy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHVwZGF0ZShwYXlsb2FkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKFxuICAgICAgYC9kb21haW5zLyR7cGF5bG9hZC5pZH1gLFxuICAgICAge1xuICAgICAgICBjbGlja190cmFja2luZzogcGF5bG9hZC5jbGlja1RyYWNraW5nLFxuICAgICAgICBvcGVuX3RyYWNraW5nOiBwYXlsb2FkLm9wZW5UcmFja2luZyxcbiAgICAgICAgdGxzOiBwYXlsb2FkLnRsc1xuICAgICAgfVxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgcmVtb3ZlKGlkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmRlbGV0ZShcbiAgICAgIGAvZG9tYWlucy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHZlcmlmeShpZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgYC9kb21haW5zLyR7aWR9L3ZlcmlmeWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59O1xuXG4vLyBzcmMvZW1haWxzL2F0dGFjaG1lbnRzL2F0dGFjaG1lbnRzLnRzXG52YXIgQXR0YWNobWVudHMgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuICAgIHRoaXMucmVzZW5kID0gcmVzZW5kO1xuICB9XG4gIGFzeW5jIGdldChvcHRpb25zKSB7XG4gICAgY29uc3QgeyBlbWFpbElkLCBpZCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KFxuICAgICAgYC9lbWFpbHMvJHtlbWFpbElkfS9hdHRhY2htZW50cy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucykge1xuICAgIGNvbnN0IHsgZW1haWxJZCB9ID0gb3B0aW9ucztcbiAgICBjb25zdCBxdWVyeVN0cmluZyA9IGJ1aWxkUGFnaW5hdGlvblF1ZXJ5KG9wdGlvbnMpO1xuICAgIGNvbnN0IHVybCA9IHF1ZXJ5U3RyaW5nID8gYC9lbWFpbHMvJHtlbWFpbElkfS9hdHRhY2htZW50cz8ke3F1ZXJ5U3RyaW5nfWAgOiBgL2VtYWlscy8ke2VtYWlsSWR9L2F0dGFjaG1lbnRzYDtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbn07XG5cbi8vIHNyYy9lbWFpbHMvcmVjZWl2aW5nL2F0dGFjaG1lbnRzL2F0dGFjaG1lbnRzLnRzXG52YXIgQXR0YWNobWVudHMyID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyBnZXQob3B0aW9ucykge1xuICAgIGNvbnN0IHsgZW1haWxJZCwgaWQgfSA9IG9wdGlvbnM7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldChcbiAgICAgIGAvZW1haWxzL3JlY2VpdmluZy8ke2VtYWlsSWR9L2F0dGFjaG1lbnRzLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgbGlzdChvcHRpb25zKSB7XG4gICAgY29uc3QgeyBlbWFpbElkIH0gPSBvcHRpb25zO1xuICAgIGNvbnN0IHF1ZXJ5U3RyaW5nID0gYnVpbGRQYWdpbmF0aW9uUXVlcnkob3B0aW9ucyk7XG4gICAgY29uc3QgdXJsID0gcXVlcnlTdHJpbmcgPyBgL2VtYWlscy9yZWNlaXZpbmcvJHtlbWFpbElkfS9hdHRhY2htZW50cz8ke3F1ZXJ5U3RyaW5nfWAgOiBgL2VtYWlscy9yZWNlaXZpbmcvJHtlbWFpbElkfS9hdHRhY2htZW50c2A7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59O1xuXG4vLyBzcmMvZW1haWxzL3JlY2VpdmluZy9yZWNlaXZpbmcudHNcbnZhciBSZWNlaXZpbmcgPSBjbGFzcyB7XG4gIGNvbnN0cnVjdG9yKHJlc2VuZCkge1xuICAgIHRoaXMucmVzZW5kID0gcmVzZW5kO1xuICAgIHRoaXMuYXR0YWNobWVudHMgPSBuZXcgQXR0YWNobWVudHMyKHJlc2VuZCk7XG4gIH1cbiAgYXN5bmMgZ2V0KGlkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldChcbiAgICAgIGAvZW1haWxzL3JlY2VpdmluZy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvZW1haWxzL3JlY2VpdmluZz8ke3F1ZXJ5U3RyaW5nfWAgOiBcIi9lbWFpbHMvcmVjZWl2aW5nXCI7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldCh1cmwpO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59O1xuXG4vLyBzcmMvZW1haWxzL2VtYWlscy50c1xudmFyIEVtYWlscyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gICAgdGhpcy5hdHRhY2htZW50cyA9IG5ldyBBdHRhY2htZW50cyhyZXNlbmQpO1xuICAgIHRoaXMucmVjZWl2aW5nID0gbmV3IFJlY2VpdmluZyhyZXNlbmQpO1xuICB9XG4gIGFzeW5jIHNlbmQocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMuY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIGNyZWF0ZShwYXlsb2FkLCBvcHRpb25zID0ge30pIHtcbiAgICBpZiAocGF5bG9hZC5yZWFjdCkge1xuICAgICAgcGF5bG9hZC5odG1sID0gYXdhaXQgcmVuZGVyKHBheWxvYWQucmVhY3QpO1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucG9zdChcbiAgICAgIFwiL2VtYWlsc1wiLFxuICAgICAgcGFyc2VFbWFpbFRvQXBpT3B0aW9ucyhwYXlsb2FkKSxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGdldChpZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQoXG4gICAgICBgL2VtYWlscy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvZW1haWxzPyR7cXVlcnlTdHJpbmd9YCA6IFwiL2VtYWlsc1wiO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5nZXQodXJsKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyB1cGRhdGUocGF5bG9hZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wYXRjaChcbiAgICAgIGAvZW1haWxzLyR7cGF5bG9hZC5pZH1gLFxuICAgICAge1xuICAgICAgICBzY2hlZHVsZWRfYXQ6IHBheWxvYWQuc2NoZWR1bGVkQXRcbiAgICAgIH1cbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGNhbmNlbChpZCkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgYC9lbWFpbHMvJHtpZH0vY2FuY2VsYFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbn07XG5cbi8vIHNyYy9zZWdtZW50cy9zZWdtZW50cy50c1xudmFyIFNlZ21lbnRzID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihyZXNlbmQpIHtcbiAgICB0aGlzLnJlc2VuZCA9IHJlc2VuZDtcbiAgfVxuICBhc3luYyBjcmVhdGUocGF5bG9hZCwgb3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBcIi9zZWdtZW50c1wiLFxuICAgICAgcGF5bG9hZCxcbiAgICAgIG9wdGlvbnNcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvc2VnbWVudHM/JHtxdWVyeVN0cmluZ31gIDogXCIvc2VnbWVudHNcIjtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgZ2V0KGlkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldChcbiAgICAgIGAvc2VnbWVudHMvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyByZW1vdmUoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKFxuICAgICAgYC9zZWdtZW50cy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59O1xuXG4vLyBzcmMvY29tbW9uL3V0aWxzL2dldC1wYWdpbmF0aW9uLXF1ZXJ5LXByb3BlcnRpZXMudHNcbmZ1bmN0aW9uIGdldFBhZ2luYXRpb25RdWVyeVByb3BlcnRpZXMob3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IHF1ZXJ5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpO1xuICBpZiAob3B0aW9ucy5iZWZvcmUpIHF1ZXJ5LnNldChcImJlZm9yZVwiLCBvcHRpb25zLmJlZm9yZSk7XG4gIGlmIChvcHRpb25zLmFmdGVyKSBxdWVyeS5zZXQoXCJhZnRlclwiLCBvcHRpb25zLmFmdGVyKTtcbiAgaWYgKG9wdGlvbnMubGltaXQpIHF1ZXJ5LnNldChcImxpbWl0XCIsIG9wdGlvbnMubGltaXQudG9TdHJpbmcoKSk7XG4gIHJldHVybiBxdWVyeS5zaXplID4gMCA/IGA/JHtxdWVyeS50b1N0cmluZygpfWAgOiBcIlwiO1xufVxuXG4vLyBzcmMvY29tbW9uL3V0aWxzL3BhcnNlLXRlbXBsYXRlLXRvLWFwaS1vcHRpb25zLnRzXG5mdW5jdGlvbiBwYXJzZVZhcmlhYmxlcyh2YXJpYWJsZXMpIHtcbiAgcmV0dXJuIHZhcmlhYmxlcyA9PSBudWxsID8gdm9pZCAwIDogdmFyaWFibGVzLm1hcCgodmFyaWFibGUpID0+ICh7XG4gICAga2V5OiB2YXJpYWJsZS5rZXksXG4gICAgdHlwZTogdmFyaWFibGUudHlwZSxcbiAgICBmYWxsYmFja192YWx1ZTogdmFyaWFibGUuZmFsbGJhY2tWYWx1ZVxuICB9KSk7XG59XG5mdW5jdGlvbiBwYXJzZVRlbXBsYXRlVG9BcGlPcHRpb25zKHRlbXBsYXRlKSB7XG4gIHJldHVybiB7XG4gICAgbmFtZTogXCJuYW1lXCIgaW4gdGVtcGxhdGUgPyB0ZW1wbGF0ZS5uYW1lIDogdm9pZCAwLFxuICAgIHN1YmplY3Q6IHRlbXBsYXRlLnN1YmplY3QsXG4gICAgaHRtbDogdGVtcGxhdGUuaHRtbCxcbiAgICB0ZXh0OiB0ZW1wbGF0ZS50ZXh0LFxuICAgIGFsaWFzOiB0ZW1wbGF0ZS5hbGlhcyxcbiAgICBmcm9tOiB0ZW1wbGF0ZS5mcm9tLFxuICAgIHJlcGx5X3RvOiB0ZW1wbGF0ZS5yZXBseVRvLFxuICAgIHZhcmlhYmxlczogcGFyc2VWYXJpYWJsZXModGVtcGxhdGUudmFyaWFibGVzKVxuICB9O1xufVxuXG4vLyBzcmMvdGVtcGxhdGVzL2NoYWluYWJsZS10ZW1wbGF0ZS1yZXN1bHQudHNcbnZhciBDaGFpbmFibGVUZW1wbGF0ZVJlc3VsdCA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocHJvbWlzZSwgcHVibGlzaEZuKSB7XG4gICAgdGhpcy5wcm9taXNlID0gcHJvbWlzZTtcbiAgICB0aGlzLnB1Ymxpc2hGbiA9IHB1Ymxpc2hGbjtcbiAgfVxuICAvLyBJZiB1c2VyIGNhbGxzIGB0aGVuYCBvciBvbmx5IGF3YWl0cyBmb3IgdGhlIHJlc3VsdCBvZiBjcmVhdGUoKSBvciBkdXBsaWNhdGUoKSwgdGhlIGJlaGF2aW9yIHNob3VsZCBiZVxuICAvLyBleGFjdGx5IGFzIGlmIHRoZXkgY2FsbGVkIGNyZWF0ZSgpIG9yIGR1cGxpY2F0ZSgpIGRpcmVjdGx5LiBUaGlzIHdpbGwgYWN0IGFzIGEgbm9ybWFsIHByb21pc2VcbiAgLy8gYmlvbWUtaWdub3JlIGxpbnQvc3VzcGljaW91cy9ub1RoZW5Qcm9wZXJ0eTogVGhpcyBjbGFzcyBpbnRlbnRpb25hbGx5IGltcGxlbWVudHMgUHJvbWlzZUxpa2VcbiAgdGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCkge1xuICAgIHJldHVybiB0aGlzLnByb21pc2UudGhlbihvbmZ1bGZpbGxlZCwgb25yZWplY3RlZCk7XG4gIH1cbiAgYXN5bmMgcHVibGlzaCgpIHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCB0aGlzLnByb21pc2U7XG4gICAgaWYgKGVycm9yKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBudWxsLFxuICAgICAgICBlcnJvclxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucHVibGlzaEZuKGRhdGEuaWQpO1xuICB9XG59O1xuXG4vLyBzcmMvdGVtcGxhdGVzL3RlbXBsYXRlcy50c1xudmFyIFRlbXBsYXRlcyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gIH1cbiAgY3JlYXRlKHBheWxvYWQpIHtcbiAgICBjb25zdCBjcmVhdGVQcm9taXNlID0gdGhpcy5wZXJmb3JtQ3JlYXRlKHBheWxvYWQpO1xuICAgIHJldHVybiBuZXcgQ2hhaW5hYmxlVGVtcGxhdGVSZXN1bHQoY3JlYXRlUHJvbWlzZSwgdGhpcy5wdWJsaXNoLmJpbmQodGhpcykpO1xuICB9XG4gIC8vIFRoaXMgY3JlYXRpb24gcHJvY2VzcyBpcyBiZWluZyBkb25lIHNlcGFyYXRlbHkgZnJvbSB0aGUgcHVibGljIGNyZWF0ZSBzbyB0aGF0XG4gIC8vIHRoZSB1c2VyIGNhbiBjaGFpbiB0aGUgcHVibGlzaCBvcGVyYXRpb24gYWZ0ZXIgdGhlIGNyZWF0ZSBvcGVyYXRpb24uIE90aGVyd2lzZSwgZHVlXG4gIC8vIHRvIHRoZSBhc3luYyBuYXR1cmUgb2YgdGhlIHJlbmRlckFzeW5jLCB0aGUgcmV0dXJuIHR5cGUgd291bGQgYmVcbiAgLy8gUHJvbWlzZTxDaGFpbmFibGVUZW1wbGF0ZVJlc3VsdDxDcmVhdGVUZW1wbGF0ZVJlc3BvbnNlPj4gd2hpY2ggd291bGRuJ3QgYmUgY2hhaW5hYmxlLlxuICBhc3luYyBwZXJmb3JtQ3JlYXRlKHBheWxvYWQpIHtcbiAgICBpZiAocGF5bG9hZC5yZWFjdCkge1xuICAgICAgaWYgKCF0aGlzLnJlbmRlckFzeW5jKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgeyByZW5kZXJBc3luYyB9ID0gYXdhaXQgaW1wb3J0KFwiQHJlYWN0LWVtYWlsL3JlbmRlclwiKTtcbiAgICAgICAgICB0aGlzLnJlbmRlckFzeW5jID0gcmVuZGVyQXN5bmM7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICBcIkZhaWxlZCB0byByZW5kZXIgUmVhY3QgY29tcG9uZW50LiBNYWtlIHN1cmUgdG8gaW5zdGFsbCBgQHJlYWN0LWVtYWlsL3JlbmRlcmBcIlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHBheWxvYWQuaHRtbCA9IGF3YWl0IHRoaXMucmVuZGVyQXN5bmMoXG4gICAgICAgIHBheWxvYWQucmVhY3RcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgXCIvdGVtcGxhdGVzXCIsXG4gICAgICBwYXJzZVRlbXBsYXRlVG9BcGlPcHRpb25zKHBheWxvYWQpXG4gICAgKTtcbiAgfVxuICBhc3luYyByZW1vdmUoaWRlbnRpZmllcikge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5kZWxldGUoXG4gICAgICBgL3RlbXBsYXRlcy8ke2lkZW50aWZpZXJ9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgZ2V0KGlkZW50aWZpZXIpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KFxuICAgICAgYC90ZW1wbGF0ZXMvJHtpZGVudGlmaWVyfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG4gICAgcmV0dXJuIHRoaXMucmVzZW5kLmdldChcbiAgICAgIGAvdGVtcGxhdGVzJHtnZXRQYWdpbmF0aW9uUXVlcnlQcm9wZXJ0aWVzKG9wdGlvbnMpfWBcbiAgICApO1xuICB9XG4gIGR1cGxpY2F0ZShpZGVudGlmaWVyKSB7XG4gICAgY29uc3QgcHJvbWlzZUR1cGxpY2F0ZSA9IHRoaXMucmVzZW5kLnBvc3QoXG4gICAgICBgL3RlbXBsYXRlcy8ke2lkZW50aWZpZXJ9L2R1cGxpY2F0ZWBcbiAgICApO1xuICAgIHJldHVybiBuZXcgQ2hhaW5hYmxlVGVtcGxhdGVSZXN1bHQoXG4gICAgICBwcm9taXNlRHVwbGljYXRlLFxuICAgICAgdGhpcy5wdWJsaXNoLmJpbmQodGhpcylcbiAgICApO1xuICB9XG4gIGFzeW5jIHB1Ymxpc2goaWRlbnRpZmllcikge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgYC90ZW1wbGF0ZXMvJHtpZGVudGlmaWVyfS9wdWJsaXNoYFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgdXBkYXRlKGlkZW50aWZpZXIsIHBheWxvYWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucGF0Y2goXG4gICAgICBgL3RlbXBsYXRlcy8ke2lkZW50aWZpZXJ9YCxcbiAgICAgIHBhcnNlVGVtcGxhdGVUb0FwaU9wdGlvbnMocGF5bG9hZClcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG59O1xuXG4vLyBzcmMvdG9waWNzL3RvcGljcy50c1xudmFyIFRvcGljcyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlKHBheWxvYWQpIHtcbiAgICBjb25zdCBfYSA9IHBheWxvYWQsIHsgZGVmYXVsdFN1YnNjcmlwdGlvbiB9ID0gX2EsIGJvZHkgPSBfX29ialJlc3QoX2EsIFtcImRlZmF1bHRTdWJzY3JpcHRpb25cIl0pO1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFwiL3RvcGljc1wiLCBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBib2R5KSwge1xuICAgICAgZGVmYXVsdF9zdWJzY3JpcHRpb246IGRlZmF1bHRTdWJzY3JpcHRpb25cbiAgICB9KSk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgbGlzdCgpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KFwiL3RvcGljc1wiKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBnZXQoaWQpIHtcbiAgICBpZiAoIWlkKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBudWxsLFxuICAgICAgICBlcnJvcjoge1xuICAgICAgICAgIG1lc3NhZ2U6IFwiTWlzc2luZyBgaWRgIGZpZWxkLlwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbmFtZTogXCJtaXNzaW5nX3JlcXVpcmVkX2ZpZWxkXCJcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLmdldChcbiAgICAgIGAvdG9waWNzLyR7aWR9YFxuICAgICk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgdXBkYXRlKHBheWxvYWQpIHtcbiAgICBpZiAoIXBheWxvYWQuaWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGhlYWRlcnM6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgZmllbGQuXCIsXG4gICAgICAgICAgc3RhdHVzQ29kZTogbnVsbCxcbiAgICAgICAgICBuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQucGF0Y2goXG4gICAgICBgL3RvcGljcy8ke3BheWxvYWQuaWR9YCxcbiAgICAgIHBheWxvYWRcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIHJlbW92ZShpZCkge1xuICAgIGlmICghaWQpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGhlYWRlcnM6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbWVzc2FnZTogXCJNaXNzaW5nIGBpZGAgZmllbGQuXCIsXG4gICAgICAgICAgc3RhdHVzQ29kZTogbnVsbCxcbiAgICAgICAgICBuYW1lOiBcIm1pc3NpbmdfcmVxdWlyZWRfZmllbGRcIlxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH1cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKFxuICAgICAgYC90b3BpY3MvJHtpZH1gXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxufTtcblxuLy8gc3JjL3dlYmhvb2tzL3dlYmhvb2tzLnRzXG5pbXBvcnQgeyBXZWJob29rIH0gZnJvbSBcInN2aXhcIjtcbnZhciBXZWJob29rcyA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IocmVzZW5kKSB7XG4gICAgdGhpcy5yZXNlbmQgPSByZXNlbmQ7XG4gIH1cbiAgYXN5bmMgY3JlYXRlKHBheWxvYWQsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnJlc2VuZC5wb3N0KFxuICAgICAgXCIvd2ViaG9va3NcIixcbiAgICAgIHBheWxvYWQsXG4gICAgICBvcHRpb25zXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyBnZXQoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KFxuICAgICAgYC93ZWJob29rcy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIGFzeW5jIGxpc3Qob3B0aW9ucyA9IHt9KSB7XG4gICAgY29uc3QgcXVlcnlTdHJpbmcgPSBidWlsZFBhZ2luYXRpb25RdWVyeShvcHRpb25zKTtcbiAgICBjb25zdCB1cmwgPSBxdWVyeVN0cmluZyA/IGAvd2ViaG9va3M/JHtxdWVyeVN0cmluZ31gIDogXCIvd2ViaG9va3NcIjtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZ2V0KHVybCk7XG4gICAgcmV0dXJuIGRhdGE7XG4gIH1cbiAgYXN5bmMgdXBkYXRlKGlkLCBwYXlsb2FkKSB7XG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMucmVzZW5kLnBhdGNoKFxuICAgICAgYC93ZWJob29rcy8ke2lkfWAsXG4gICAgICBwYXlsb2FkXG4gICAgKTtcbiAgICByZXR1cm4gZGF0YTtcbiAgfVxuICBhc3luYyByZW1vdmUoaWQpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy5yZXNlbmQuZGVsZXRlKFxuICAgICAgYC93ZWJob29rcy8ke2lkfWBcbiAgICApO1xuICAgIHJldHVybiBkYXRhO1xuICB9XG4gIHZlcmlmeShwYXlsb2FkKSB7XG4gICAgY29uc3Qgd2ViaG9vayA9IG5ldyBXZWJob29rKHBheWxvYWQud2ViaG9va1NlY3JldCk7XG4gICAgcmV0dXJuIHdlYmhvb2sudmVyaWZ5KHBheWxvYWQucGF5bG9hZCwge1xuICAgICAgXCJzdml4LWlkXCI6IHBheWxvYWQuaGVhZGVycy5pZCxcbiAgICAgIFwic3ZpeC10aW1lc3RhbXBcIjogcGF5bG9hZC5oZWFkZXJzLnRpbWVzdGFtcCxcbiAgICAgIFwic3ZpeC1zaWduYXR1cmVcIjogcGF5bG9hZC5oZWFkZXJzLnNpZ25hdHVyZVxuICAgIH0pO1xuICB9XG59O1xuXG4vLyBzcmMvcmVzZW5kLnRzXG52YXIgZGVmYXVsdEJhc2VVcmwgPSBcImh0dHBzOi8vYXBpLnJlc2VuZC5jb21cIjtcbnZhciBkZWZhdWx0VXNlckFnZW50ID0gYHJlc2VuZC1ub2RlOiR7dmVyc2lvbn1gO1xudmFyIGJhc2VVcmwgPSB0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudiA/IHByb2Nlc3MuZW52LlJFU0VORF9CQVNFX1VSTCB8fCBkZWZhdWx0QmFzZVVybCA6IGRlZmF1bHRCYXNlVXJsO1xudmFyIHVzZXJBZ2VudCA9IHR5cGVvZiBwcm9jZXNzICE9PSBcInVuZGVmaW5lZFwiICYmIHByb2Nlc3MuZW52ID8gcHJvY2Vzcy5lbnYuUkVTRU5EX1VTRVJfQUdFTlQgfHwgZGVmYXVsdFVzZXJBZ2VudCA6IGRlZmF1bHRVc2VyQWdlbnQ7XG52YXIgUmVzZW5kID0gY2xhc3Mge1xuICBjb25zdHJ1Y3RvcihrZXkpIHtcbiAgICB0aGlzLmtleSA9IGtleTtcbiAgICB0aGlzLmFwaUtleXMgPSBuZXcgQXBpS2V5cyh0aGlzKTtcbiAgICB0aGlzLnNlZ21lbnRzID0gbmV3IFNlZ21lbnRzKHRoaXMpO1xuICAgIC8qKlxuICAgICAqIEBkZXByZWNhdGVkIFVzZSBzZWdtZW50cyBpbnN0ZWFkXG4gICAgICovXG4gICAgdGhpcy5hdWRpZW5jZXMgPSB0aGlzLnNlZ21lbnRzO1xuICAgIHRoaXMuYmF0Y2ggPSBuZXcgQmF0Y2godGhpcyk7XG4gICAgdGhpcy5icm9hZGNhc3RzID0gbmV3IEJyb2FkY2FzdHModGhpcyk7XG4gICAgdGhpcy5jb250YWN0cyA9IG5ldyBDb250YWN0cyh0aGlzKTtcbiAgICB0aGlzLmNvbnRhY3RQcm9wZXJ0aWVzID0gbmV3IENvbnRhY3RQcm9wZXJ0aWVzKHRoaXMpO1xuICAgIHRoaXMuZG9tYWlucyA9IG5ldyBEb21haW5zKHRoaXMpO1xuICAgIHRoaXMuZW1haWxzID0gbmV3IEVtYWlscyh0aGlzKTtcbiAgICB0aGlzLndlYmhvb2tzID0gbmV3IFdlYmhvb2tzKHRoaXMpO1xuICAgIHRoaXMudGVtcGxhdGVzID0gbmV3IFRlbXBsYXRlcyh0aGlzKTtcbiAgICB0aGlzLnRvcGljcyA9IG5ldyBUb3BpY3ModGhpcyk7XG4gICAgaWYgKCFrZXkpIHtcbiAgICAgIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gXCJ1bmRlZmluZWRcIiAmJiBwcm9jZXNzLmVudikge1xuICAgICAgICB0aGlzLmtleSA9IHByb2Nlc3MuZW52LlJFU0VORF9BUElfS0VZO1xuICAgICAgfVxuICAgICAgaWYgKCF0aGlzLmtleSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgJ01pc3NpbmcgQVBJIGtleS4gUGFzcyBpdCB0byB0aGUgY29uc3RydWN0b3IgYG5ldyBSZXNlbmQoXCJyZV8xMjNcIilgJ1xuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyh7XG4gICAgICBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5rZXl9YCxcbiAgICAgIFwiVXNlci1BZ2VudFwiOiB1c2VyQWdlbnQsXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICAgIH0pO1xuICB9XG4gIGFzeW5jIGZldGNoUmVxdWVzdChwYXRoLCBvcHRpb25zID0ge30pIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtiYXNlVXJsfSR7cGF0aH1gLCBvcHRpb25zKTtcbiAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByYXdFcnJvciA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZGF0YTogbnVsbCxcbiAgICAgICAgICAgIGVycm9yOiBKU09OLnBhcnNlKHJhd0Vycm9yKSxcbiAgICAgICAgICAgIGhlYWRlcnM6IE9iamVjdC5mcm9tRW50cmllcyhyZXNwb25zZS5oZWFkZXJzLmVudHJpZXMoKSlcbiAgICAgICAgICB9O1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgU3ludGF4RXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogXCJhcHBsaWNhdGlvbl9lcnJvclwiLFxuICAgICAgICAgICAgICAgIHN0YXR1c0NvZGU6IHJlc3BvbnNlLnN0YXR1cyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBcIkludGVybmFsIHNlcnZlciBlcnJvci4gV2UgYXJlIHVuYWJsZSB0byBwcm9jZXNzIHlvdXIgcmVxdWVzdCByaWdodCBub3csIHBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuXCJcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgaGVhZGVyczogT2JqZWN0LmZyb21FbnRyaWVzKHJlc3BvbnNlLmhlYWRlcnMuZW50cmllcygpKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZXJyb3IgPSB7XG4gICAgICAgICAgICBtZXNzYWdlOiByZXNwb25zZS5zdGF0dXNUZXh0LFxuICAgICAgICAgICAgc3RhdHVzQ29kZTogcmVzcG9uc2Uuc3RhdHVzLFxuICAgICAgICAgICAgbmFtZTogXCJhcHBsaWNhdGlvbl9lcnJvclwiXG4gICAgICAgICAgfTtcbiAgICAgICAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgICAgICAgIGVycm9yOiBfX3NwcmVhZFByb3BzKF9fc3ByZWFkVmFsdWVzKHt9LCBlcnJvciksIHsgbWVzc2FnZTogZXJyLm1lc3NhZ2UgfSksXG4gICAgICAgICAgICAgIGhlYWRlcnM6IE9iamVjdC5mcm9tRW50cmllcyhyZXNwb25zZS5oZWFkZXJzLmVudHJpZXMoKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBkYXRhOiBudWxsLFxuICAgICAgICAgICAgZXJyb3IsXG4gICAgICAgICAgICBoZWFkZXJzOiBPYmplY3QuZnJvbUVudHJpZXMocmVzcG9uc2UuaGVhZGVycy5lbnRyaWVzKCkpXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGEsXG4gICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICBoZWFkZXJzOiBPYmplY3QuZnJvbUVudHJpZXMocmVzcG9uc2UuaGVhZGVycy5lbnRyaWVzKCkpXG4gICAgICB9O1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRhdGE6IG51bGwsXG4gICAgICAgIGVycm9yOiB7XG4gICAgICAgICAgbmFtZTogXCJhcHBsaWNhdGlvbl9lcnJvclwiLFxuICAgICAgICAgIHN0YXR1c0NvZGU6IG51bGwsXG4gICAgICAgICAgbWVzc2FnZTogXCJVbmFibGUgdG8gZmV0Y2ggZGF0YS4gVGhlIHJlcXVlc3QgY291bGQgbm90IGJlIHJlc29sdmVkLlwiXG4gICAgICAgIH0sXG4gICAgICAgIGhlYWRlcnM6IG51bGxcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIGFzeW5jIHBvc3QocGF0aCwgZW50aXR5LCBvcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBoZWFkZXJzID0gbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKTtcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpLmVudHJpZXMoKSkge1xuICAgICAgICBoZWFkZXJzLnNldChrZXksIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKG9wdGlvbnMuaWRlbXBvdGVuY3lLZXkpIHtcbiAgICAgIGhlYWRlcnMuc2V0KFwiSWRlbXBvdGVuY3ktS2V5XCIsIG9wdGlvbnMuaWRlbXBvdGVuY3lLZXkpO1xuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGVudGl0eSlcbiAgICB9LCBvcHRpb25zKSwge1xuICAgICAgaGVhZGVyc1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLmZldGNoUmVxdWVzdChwYXRoLCByZXF1ZXN0T3B0aW9ucyk7XG4gIH1cbiAgYXN5bmMgZ2V0KHBhdGgsIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpO1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycykuZW50cmllcygpKSB7XG4gICAgICAgIGhlYWRlcnMuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgbWV0aG9kOiBcIkdFVFwiXG4gICAgfSwgb3B0aW9ucyksIHtcbiAgICAgIGhlYWRlcnNcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIHB1dChwYXRoLCBlbnRpdHksIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpO1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycykuZW50cmllcygpKSB7XG4gICAgICAgIGhlYWRlcnMuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZW50aXR5KVxuICAgIH0sIG9wdGlvbnMpLCB7XG4gICAgICBoZWFkZXJzXG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuZmV0Y2hSZXF1ZXN0KHBhdGgsIHJlcXVlc3RPcHRpb25zKTtcbiAgfVxuICBhc3luYyBwYXRjaChwYXRoLCBlbnRpdHksIG9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IGhlYWRlcnMgPSBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpO1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycykuZW50cmllcygpKSB7XG4gICAgICAgIGhlYWRlcnMuc2V0KGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCByZXF1ZXN0T3B0aW9ucyA9IF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShlbnRpdHkpXG4gICAgfSwgb3B0aW9ucyksIHtcbiAgICAgIGhlYWRlcnNcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpO1xuICB9XG4gIGFzeW5jIGRlbGV0ZShwYXRoLCBxdWVyeSkge1xuICAgIGNvbnN0IHJlcXVlc3RPcHRpb25zID0ge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocXVlcnkpLFxuICAgICAgaGVhZGVyczogdGhpcy5oZWFkZXJzXG4gICAgfTtcbiAgICByZXR1cm4gdGhpcy5mZXRjaFJlcXVlc3QocGF0aCwgcmVxdWVzdE9wdGlvbnMpO1xuICB9XG59O1xuZXhwb3J0IHtcbiAgUmVzZW5kXG59O1xuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/../../node_modules/.pnpm/resend@6.4.2/node_modules/resend/dist/index.mjs\n");

/***/ })

};
;